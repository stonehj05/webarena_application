<!DOCTYPE html>
<html>
<head>
    <title>Homepage</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: white;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        #container {
            width: 90%;
            margin: auto;
            overflow: hidden;
        }

        #header {
            background-color: #f4f7f9;
            color: #232f34;
            padding-top: 30px;
            min-height: 70px;
            border-bottom: #b1c1c6 3px solid;
            font-family: 'Roboto', sans-serif;
        }

        #header h1 {
            padding: 5px;
            margin: 0;
            text-align: center;
            font-weight: 500;
        }

        .card {
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 200px; /* Changed width */
            height: 200px; /* Added height */
            text-align: center;
            margin: 10px;
            padding: 10px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            display: inline-block;
            overflow: auto; /* To handle content that might overflow */
        }

        .card img {
            width: 35%;
        }

        .card h2 {
            font-size: 15px;
        }

        .card p {
            font-size: 14px;
        }

        .card a {
            color: #35424a;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="header">
            <h1>Welcome to WebArena</h1>
        </div>

        <div class="card" role="region" aria-label="OneStopShop">
         <img src="{{ url_for('static', filename='figures/onestopshop.png') }}"  alt="Logo for OneStopShop">
         <a href="http://localhost:7770">
            <h2 id="appName">OneStopShop</h2>
         </a>
         <p id="appDescription">An online shopping site</p>
        </div>

        <div class="card" role="region" aria-label="Merchant Admin Portal">
            <img src="{{ url_for('static', filename='figures/cms.png') }}"  alt="Logo for CMS">
            <a href="http://localhost:7780/admin">
                <h2 id="appName">Merchant Admin Portal</h2>
            </a>
            <p id="appDescription">An admin portal to manage E-commerce business (u: admin, p: admin1234)</p>
        </div>

        <div class="card" role="region" aria-label="Reddit">
            <img src="{{ url_for('static', filename='figures/reddit.png') }}"  alt="Logo for Reddit">
            <a href="http://localhost:9999/forums/all">
                <h2 id="appName">Reddit</h2>
            </a>
            <p id="appDescription">A social news aggregation and discussion website</p>
        </div>

        <div class="card" role="region" aria-label="Gitlab">
            <img src="{{ url_for('static', filename='figures/gitlab.png') }}"  alt="Logo for Gitlab">
            <a href="http://localhost:8023/explore">
                <h2 id="appName">Gitlab</h2>
            </a>
            <p id="appDescription">a DevOps software</p>
        </div>

        <div class="card" role="region" aria-label="Map">
            <img src="{{ url_for('static', filename='figures/map.png') }}"  alt="Logo for Map">
            <a href="http://localhost:3000">
                <h2 id="appName">OpenStreetMap</h2>
            </a>
            <p id="appDescription">North east US map</p>
        </div>

        <div class="card" role="region" aria-label="Calculator">
            <img src="{{ url_for('static', filename='figures/calculator.png') }}"  alt="Logo for Calculator">
            <a href="calculator.html">
                <h2 id="appName">Calculator</h2>
            </a>
            <p id="appDescription">A calculator</p>
        </div>

        <div class="card" role="region" aria-label="Scratchpad">
            <img src="{{ url_for('static', filename='figures/scratchpad.png') }}"  alt="Logo for Scratchpad">
            <a href="scratchpad.html">
                <h2 id="appName">Scratchpad</h2>
            </a>
            <p id="appDescription">A scratchpad for taking notes</p>
        </div>

        <div class="card" role="region" aria-label="Wikipedia">
            <img src="{{ url_for('static', filename='figures/wikipedia.png') }}"  alt="Logo for Wikipedia">
            <a href="http://localhost:8888/wikipedia_en_all_maxi_2022-05/A/User:The_other_Kiwix_guy/Landing">
                <h2 id="appName">Wikipedia</h2>
            </a>
            <p id="appDescription">An online encyclopedia</p>
        </div>

        <div class="card" role="region" aria-label="Gitlab Manual">
            <img src="{{ url_for('static', filename='figures/manual1.png') }}"  alt="Logo for Gitlab Manual">
            <a href="https://docs.gitlab.com/">
                <h2 id="appName">Gitlab Documentation</h2>
            </a>
            <p id="appDescription">Documentation for GitLab</p>
        </div>

        <div class="card" role="region" aria-label="Admin Manual">
            <img src="{{ url_for('static', filename='figures/manual2.png') }}"  alt="Logo for Admin Manual">
            <a href="https://experienceleague.adobe.com/docs/commerce-admin/user-guides/home.html?lang=en">
                <h2 id="appName">Admin Portal Manual</h2>
            </a>
            <p id="appDescription">Manual on using the admin portal</p>
        </div>
        <!-- Repeat the above card structure for each app -->

    </div>

<script>
    let commandWindow;

    // Automatically open the command window when the page loads
    window.onload = function() {
        commandWindow = window.open('', 'Command Window', 'width=400,height=300');
        
        // Write the basic structure of the command window
        commandWindow.document.write(`
            <html>
            <head><title>Command Interface</title></head>
            <body>
                <h2>Send Command</h2>
                <input type="text" id="commandInput" placeholder="Enter command">
                <button id="sendButton">Send</button>
            </body>
            </html>
        `);

        // After the document is ready, we attach the script dynamically
        commandWindow.document.close();  // Important to close the document for DOM manipulation
        commandWindow.document.getElementById('sendButton').onclick = function() {
            const command = commandWindow.document.getElementById('commandInput').value;
            // Use postMessage to communicate with the main window
            window.postMessage(command, '*');
        };
    };

    // Listen for messages from the command window
    window.addEventListener('message', function(event) {
        const command = event.data;
        // Handle the command, e.g., modify a card
        if (command === 'highlight') {
            document.querySelector('.card').style.border = '5px solid red';
        } else if (command === 'changeText') {
            document.querySelector('.card h2').innerText = 'Updated Title';
        } else if (command === 'redirectToReddit') {
                window.location.href = 'https://www.reddit.com/';
        } else if (command == 'calculator') {
            window.location.href = 'calculator.html';
        }
    });
</script>
</body>

</html>
